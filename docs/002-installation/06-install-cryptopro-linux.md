---
slug: "/post6"
title: "Установка КриптоПро CSP на платформу Linux"
metaTitle: "Установка КриптоПро CSP на платформу Linux"
sort: "06"
---

## Установка криптопровайдера  

Установка, удаление и обновление ПО осуществляется от имени пользователя, имеющего права администратора: под учётной записью root или с использованием команды sudo.  

***Примечание:*** директория расположения утилит КриптоПро CSP /opt/cprocsp/bin/amd64/

## Установка базовых пакетов скриптом  

В терминале запустите файл **install.sh** или **install_gui.sh** из архива.  

Далее описана установка пакетов на примере DEB системы.  

## Установка пакета для графического интерфейса ввода пароля   

Для работы с контейнерами закрытых ключей требуется ввод пароля.   

Установите пакет для графического интерфейса диалога ввода пароля, запустив в терминале команду:  

**sudo dpkg -i /<путь к файлу\>/cprocsp-rdr-gui-<\>.deb**  

## Установка пакетов для работы с ключевыми носителями  

***Примечание:*** для работы с ключевыми ностителями в deb-based системе должны быть установлены: библиотека libccid не ниже 1.3.11, пакеты pcscd и libpcsclite1.  

1. Установите пакеты и драйвера для работы с ключевыми носителями с помощью команд в терминале:  

	**sudo dpkg -i <путь к файлу\>/cprocsp-rdr-pcsc-<...\>.deb**    

2. Для ключевого носителя **Рутокен**:  

	**sudo dpkg -i <путь к файлу\>/cprocsp-rdr-rutoken-<...\>.deb**  

	**sudo dpkg -i <путь к файлу\>/ifd-rutokens_<...\>.deb**  

3. Для ключевого носителя **JaCarta**:  

	**sudo dpkg -i <путь к файлу\>/cprocsp-rdr-jacarta -<...\>.deb**  

4. Для ключевого носителя **ESMART**:  

	**sudo dpkg -i <путь к файлу\>/cprocsp-rdr-esmart -<...\>.deb**  

## Установка лицензии на КриптоПро CSP  

1. Откройте терминал.  
2. Введите лицензию командой:    
**sudo /opt/cprocsp/sbin/amd64/cpconfig -license -set <серийный_номер\>**   

***Примечание:*** серийный номер следует вводить с соблюдением регистра символов.  

## Установка пакета для модулей TSP и OCSP  

Для создания подписи со штампом времени или усовершенствованной подписи необходимо установить библиотеки поддержки модулей TSP и OCSP:  

1. Скачайте архив **КриптоПро ЭЦП SDK 2.0** по [ссылке](https://www.cryptopro.ru/products/cades/downloads) (требуется предварительная регистрация).    
2. Распакуйте архив.    
3. Установите пакет:  

	**sudo dpkg –i <путь к файлу\>/cprocsp-pki-х.х.х-amd64-cades.deb**    

Для создания подписи со штампом времени или усовершенствованной подписи необходима установка лицензии на модули TSP и/или OCSP.  

Для проверки подписи лицензии на данные модули устанавливать не нужно.  

## Установка лицензии на модулей TSP и OCSP  

1. Откройте терминал.  
2. Введите лицензию на модуль TSP командой:    
**sudo /opt/cprocsp/bin/amd64/tsputil license -s <серийный_номер\>**   
3. Введите лицензию на модуль OCSP командой:    
**sudo /opt/cprocsp/bin/amd64/ocsputil license -s <серийный_номер\>**  

***Примечание:*** серийный номер следует вводить с соблюдением регистра символов.  
   
## Настройки для работы с КриптоПро CSP 4 

1. Установите пакет cprocsp-rsa из дистрибутива КриптоПро:     
   **sudo dpkg -i <путь к файлу\>/cprocsp-rsa-<...\>.deb**  
2. Скачайте [скрипт](https://drive.google.com/file/d/11Ts3wshs0-Fy7mc5NACKEb1x7fEu9oAy/view?usp=sharing). 
3. В терминале введите команду:   
   **chmod u+x <путь к скрипту\>/script.sh**  
4. Далее введите команду:   
   **sudo bash <путь к скрипту\>/script.sh**    
	
	
В результате выполнения команды должно быть сообщение Operations done.  